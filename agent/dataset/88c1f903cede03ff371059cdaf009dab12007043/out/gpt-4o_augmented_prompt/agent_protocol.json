{
    "validate_diffs": [
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": "{'src/main/java/io/qameta/allure/maven/AllureCommandline.java': '/*\\n *  Copyright 2021 Qameta Software O\u00dc\\n *\\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\\n *  you may not use this file except in compliance with the License.\\n *  You may obtain a copy of the License at\\n *\\n *      http://www.apache.org/licenses/LICENSE-2.0\\n *\\n *  Unless required by applicable law or agreed to in writing, software\\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n *  See the License for the specific language governing permissions and\\n *  limitations under the License.\\n */\\npackage io.qameta.allure.maven;\\n\\nimport net.lingala.zip4j.core.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\nimport org.apache.commons.exec.CommandLine;\\nimport org.apache.commons.exec.DefaultExecutor;\\nimport org.apache.commons.exec.ExecuteWatchdog;\\nimport org.apache.commons.io.FileUtils;\\nimport org.apache.maven.execution.MavenSession;\\nimport org.apache.maven.model.Dependency;\\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\\nimport org.apache.maven.project.ProjectBuildingRequest;\\nimport org.apache.maven.settings.Proxy;\\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\\n\\nimport java.io.File;\\nimport java.io.FileNotFoundException;\\nimport java.io.IOException;\\nimport java.io.InputStream;\\nimport java.net.Authenticator;\\nimport java.net.InetSocketAddress;\\nimport java.net.PasswordAuthentication;\\nimport java.net.URL;\\nimport java.nio.file.Files;\\nimport java.nio.file.Path;\\nimport java.nio.file.StandardCopyOption;\\nimport java.util.Collections;\\nimport java.util.Iterator;\\nimport java.util.List;\\nimport java.util.Objects;\\nimport java.util.concurrent.TimeUnit;\\n\\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\\n        \"MultipleStringLiterals\"})\\npublic class AllureCommandline {\\n\\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\\n\\n    private static final int DEFAULT_TIMEOUT = 3600;\\n\\n    private final String version;\\n\\n    private final int timeout;\\n\\n    private final Path installationDirectory;\\n\\n    public AllureCommandline(final Path installationDirectory, final String version) {\\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\\n    }\\n\\n    public AllureCommandline(final Path installationDirectory, final String version,\\n            final int timeout) {\\n        this.installationDirectory = installationDirectory;\\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\\n        this.timeout = timeout;\\n    }\\n\\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\\n            throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"generate\");\\n        commandLine.addArgument(\"--clean\");\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        commandLine.addArgument(\"-o\");\\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\\n\\n        return execute(commandLine, timeout);\\n    }\\n\\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\\n            final Integer servePort) throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"serve\");\\n        if (serveHost != null && serveHost.matches(\"(\\\\\\\\d{1,3}\\\\\\\\.){3}\\\\\\\\d{1,3}\")) {\\n            commandLine.addArgument(\"--host\");\\n            commandLine.addArgument(serveHost);\\n        }\\n        if (servePort > 0) {\\n            commandLine.addArgument(\"--port\");\\n            commandLine.addArgument(Objects.toString(servePort));\\n        }\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        return execute(commandLine, timeout);\\n    }\\n\\n    private void checkAllureExists() throws FileNotFoundException {\\n        if (allureNotExists()) {\\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\\n                    + \" Make sure you\\'re using allure version not less then 2.x.\");\\n        }\\n    }\\n\\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\\n        final DefaultExecutor executor = new DefaultExecutor();\\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\\n        executor.setWatchdog(watchdog);\\n        executor.setExitValue(0);\\n        return executor.execute(commandLine);\\n    }\\n\\n    private Path getAllureExecutablePath() {\\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\\n    }\\n\\n    private Path getAllureHome() {\\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\\n    }\\n\\n    public boolean allureExists() {\\n        final Path allureExecutablePath = getAllureExecutablePath();\\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\\n    }\\n\\n    public boolean allureNotExists() {\\n        return !allureExists();\\n    }\\n\\n    public void downloadWithMaven(final MavenSession session,\\n            final DependencyResolver dependencyResolver) throws IOException {\\n        final ProjectBuildingRequest buildingRequest =\\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\\n        buildingRequest.setResolveDependencies(false);\\n\\n        final Dependency cliDep = new Dependency();\\n        cliDep.setGroupId(\"io.qameta.allure\");\\n        cliDep.setArtifactId(\"allure-commandline\");\\n        cliDep.setVersion(version);\\n        cliDep.setType(\"zip\");\\n\\n        try {\\n            final Iterator<ArtifactResult> resolved =\\n                    dependencyResolver.resolveDependencies(buildingRequest,\\n                            Collections.singletonList(cliDep), null, null).iterator();\\n\\n            if (resolved.hasNext()) {\\n                unpack(resolved.next().getArtifact().getFile());\\n            } else {\\n                throw new IOException(\"No allure commandline artifact found.\");\\n\\n            }\\n        } catch (DependencyResolverException e) {\\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\\n        }\\n    }\\n\\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\\n            throws IOException {\\n        if (allureExists()) {\\n            return;\\n        }\\n\\n        final Path allureZip = Files.createTempFile(\"allure\", version);\\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\\n        final URL url = new URL(allureUrl);\\n\\n        if (mavenProxy != null && version != null) {\\n            final InetSocketAddress proxyAddress =\\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\\n\\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\\n                final String proxyUser = mavenProxy.getUsername();\\n                final String proxyPassword = mavenProxy.getPassword();\\n\\n                Authenticator.setDefault(new Authenticator() {\\n                    @Override\\n                    public PasswordAuthentication getPasswordAuthentication() {\\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\\n                    }\\n                });\\n            }\\n\\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\\n        } else {\\n            FileUtils.copyURLToFile(url, allureZip.toFile());\\n        }\\n\\n        unpack(allureZip.toFile());\\n    }\\n\\n    private void unpack(final File file) throws IOException {\\n        try {\\n            final ZipFile zipFile = new ZipFile(file);\\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\\n        } catch (ZipException e) {\\n            throw new IOException(e);\\n        }\\n\\n        final Path allureExecutable = getAllureExecutablePath();\\n        if (Files.exists(allureExecutable)) {\\n            allureExecutable.toFile().setExecutable(true);\\n        }\\n    }\\n\\n    public Path getInstallationDirectory() {\\n        return installationDirectory;\\n    }\\n\\n    public String getVersion() {\\n        return version;\\n    }\\n\\n    private boolean isWindows() {\\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\\n    }\\n}\\nimport net.lingala.zip4j.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\n'}",
            "error": "",
            "span_id": 5558068591851841660
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": "{'src/main/java/io/qameta/allure/maven/AllureCommandline.java': '/*\\n *  Copyright 2021 Qameta Software O\u00dc\\n *\\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\\n *  you may not use this file except in compliance with the License.\\n *  You may obtain a copy of the License at\\n *\\n *      http://www.apache.org/licenses/LICENSE-2.0\\n *\\n *  Unless required by applicable law or agreed to in writing, software\\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n *  See the License for the specific language governing permissions and\\n *  limitations under the License.\\n */\\npackage io.qameta.allure.maven;\\n\\nimport net.lingala.zip4j.core.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\nimport org.apache.commons.exec.CommandLine;\\nimport org.apache.commons.exec.DefaultExecutor;\\nimport org.apache.commons.exec.ExecuteWatchdog;\\nimport org.apache.commons.io.FileUtils;\\nimport org.apache.maven.execution.MavenSession;\\nimport org.apache.maven.model.Dependency;\\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\\nimport org.apache.maven.project.ProjectBuildingRequest;\\nimport org.apache.maven.settings.Proxy;\\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\\n\\nimport java.io.File;\\nimport java.io.FileNotFoundException;\\nimport java.io.IOException;\\nimport java.io.InputStream;\\nimport java.net.Authenticator;\\nimport java.net.InetSocketAddress;\\nimport java.net.PasswordAuthentication;\\nimport java.net.URL;\\nimport java.nio.file.Files;\\nimport java.nio.file.Path;\\nimport java.nio.file.StandardCopyOption;\\nimport java.util.Collections;\\nimport java.util.Iterator;\\nimport java.util.List;\\nimport java.util.Objects;\\nimport java.util.concurrent.TimeUnit;\\n\\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\\n        \"MultipleStringLiterals\"})\\npublic class AllureCommandline {\\n\\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\\n\\n    private static final int DEFAULT_TIMEOUT = 3600;\\n\\n    private final String version;\\n\\n    private final int timeout;\\n\\n    private final Path installationDirectory;\\n\\n    public AllureCommandline(final Path installationDirectory, final String version) {\\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\\n    }\\n\\n    public AllureCommandline(final Path installationDirectory, final String version,\\n            final int timeout) {\\n        this.installationDirectory = installationDirectory;\\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\\n        this.timeout = timeout;\\n    }\\n\\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\\n            throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"generate\");\\n        commandLine.addArgument(\"--clean\");\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        commandLine.addArgument(\"-o\");\\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\\n\\n        return execute(commandLine, timeout);\\n    }\\n\\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\\n            final Integer servePort) throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"serve\");\\n        if (serveHost != null && serveHost.matches(\"(\\\\\\\\d{1,3}\\\\\\\\.){3}\\\\\\\\d{1,3}\")) {\\n            commandLine.addArgument(\"--host\");\\n            commandLine.addArgument(serveHost);\\n        }\\n        if (servePort > 0) {\\n            commandLine.addArgument(\"--port\");\\n            commandLine.addArgument(Objects.toString(servePort));\\n        }\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        return execute(commandLine, timeout);\\n    }\\n\\n    private void checkAllureExists() throws FileNotFoundException {\\n        if (allureNotExists()) {\\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\\n                    + \" Make sure you\\'re using allure version not less then 2.x.\");\\n        }\\n    }\\n\\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\\n        final DefaultExecutor executor = new DefaultExecutor();\\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\\n        executor.setWatchdog(watchdog);\\n        executor.setExitValue(0);\\n        return executor.execute(commandLine);\\n    }\\n\\n    private Path getAllureExecutablePath() {\\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\\n    }\\n\\n    private Path getAllureHome() {\\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\\n    }\\n\\n    public boolean allureExists() {\\n        final Path allureExecutablePath = getAllureExecutablePath();\\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\\n    }\\n\\n    public boolean allureNotExists() {\\n        return !allureExists();\\n    }\\n\\n    public void downloadWithMaven(final MavenSession session,\\n            final DependencyResolver dependencyResolver) throws IOException {\\n        final ProjectBuildingRequest buildingRequest =\\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\\n        buildingRequest.setResolveDependencies(false);\\n\\n        final Dependency cliDep = new Dependency();\\n        cliDep.setGroupId(\"io.qameta.allure\");\\n        cliDep.setArtifactId(\"allure-commandline\");\\n        cliDep.setVersion(version);\\n        cliDep.setType(\"zip\");\\n\\n        try {\\n            final Iterator<ArtifactResult> resolved =\\n                    dependencyResolver.resolveDependencies(buildingRequest,\\n                            Collections.singletonList(cliDep), null, null).iterator();\\n\\n            if (resolved.hasNext()) {\\n                unpack(resolved.next().getArtifact().getFile());\\n            } else {\\n                throw new IOException(\"No allure commandline artifact found.\");\\n\\n            }\\n        } catch (DependencyResolverException e) {\\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\\n        }\\n    }\\n\\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\\n            throws IOException {\\n        if (allureExists()) {\\n            return;\\n        }\\n\\n        final Path allureZip = Files.createTempFile(\"allure\", version);\\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\\n        final URL url = new URL(allureUrl);\\n\\n        if (mavenProxy != null && version != null) {\\n            final InetSocketAddress proxyAddress =\\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\\n\\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\\n                final String proxyUser = mavenProxy.getUsername();\\n                final String proxyPassword = mavenProxy.getPassword();\\n\\n                Authenticator.setDefault(new Authenticator() {\\n                    @Override\\n                    public PasswordAuthentication getPasswordAuthentication() {\\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\\n                    }\\n                });\\n            }\\n\\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\\n        } else {\\n            FileUtils.copyURLToFile(url, allureZip.toFile());\\n        }\\n\\n        unpack(allureZip.toFile());\\n    }\\n\\n    private void unpack(final File file) throws IOException {\\n        try {\\n            final ZipFile zipFile = new ZipFile(file);\\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\\n        } catch (ZipException e) {\\n            throw new IOException(e);\\n        }\\n\\n        final Path allureExecutable = getAllureExecutablePath();\\n        if (Files.exists(allureExecutable)) {\\n            allureExecutable.toFile().setExecutable(true);\\n        }\\n    }\\n\\n    public Path getInstallationDirectory() {\\n        return installationDirectory;\\n    }\\n\\n    public String getVersion() {\\n        return version;\\n    }\\n\\n    private boolean isWindows() {\\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\\n    }\\n}\\nimport net.lingala.zip4j.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\n'}",
            "error": "",
            "span_id": 5012866652798017172
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": "{'src/main/java/io/qameta/allure/maven/AllureCommandline.java': '/*\\n *  Copyright 2021 Qameta Software O\u00dc\\n *\\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\\n *  you may not use this file except in compliance with the License.\\n *  You may obtain a copy of the License at\\n *\\n *      http://www.apache.org/licenses/LICENSE-2.0\\n *\\n *  Unless required by applicable law or agreed to in writing, software\\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n *  See the License for the specific language governing permissions and\\n *  limitations under the License.\\n */\\npackage io.qameta.allure.maven;\\n\\nimport net.lingala.zip4j.core.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\nimport org.apache.commons.exec.CommandLine;\\nimport org.apache.commons.exec.DefaultExecutor;\\nimport org.apache.commons.exec.ExecuteWatchdog;\\nimport org.apache.commons.io.FileUtils;\\nimport org.apache.maven.execution.MavenSession;\\nimport org.apache.maven.model.Dependency;\\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\\nimport org.apache.maven.project.ProjectBuildingRequest;\\nimport org.apache.maven.settings.Proxy;\\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\\n\\nimport java.io.File;\\nimport java.io.FileNotFoundException;\\nimport java.io.IOException;\\nimport java.io.InputStream;\\nimport java.net.Authenticator;\\nimport java.net.InetSocketAddress;\\nimport java.net.PasswordAuthentication;\\nimport java.net.URL;\\nimport java.nio.file.Files;\\nimport java.nio.file.Path;\\nimport java.nio.file.StandardCopyOption;\\nimport java.util.Collections;\\nimport java.util.Iterator;\\nimport java.util.List;\\nimport java.util.Objects;\\nimport java.util.concurrent.TimeUnit;\\n\\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\\n        \"MultipleStringLiterals\"})\\npublic class AllureCommandline {\\n\\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\\n\\n    private static final int DEFAULT_TIMEOUT = 3600;\\n\\n    private final String version;\\n\\n    private final int timeout;\\n\\n    private final Path installationDirectory;\\n\\n    public AllureCommandline(final Path installationDirectory, final String version) {\\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\\n    }\\n\\n    public AllureCommandline(final Path installationDirectory, final String version,\\n            final int timeout) {\\n        this.installationDirectory = installationDirectory;\\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\\n        this.timeout = timeout;\\n    }\\n\\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\\n            throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"generate\");\\n        commandLine.addArgument(\"--clean\");\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        commandLine.addArgument(\"-o\");\\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\\n\\n        return execute(commandLine, timeout);\\n    }\\n\\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\\n            final Integer servePort) throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"serve\");\\n        if (serveHost != null && serveHost.matches(\"(\\\\\\\\d{1,3}\\\\\\\\.){3}\\\\\\\\d{1,3}\")) {\\n            commandLine.addArgument(\"--host\");\\n            commandLine.addArgument(serveHost);\\n        }\\n        if (servePort > 0) {\\n            commandLine.addArgument(\"--port\");\\n            commandLine.addArgument(Objects.toString(servePort));\\n        }\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        return execute(commandLine, timeout);\\n    }\\n\\n    private void checkAllureExists() throws FileNotFoundException {\\n        if (allureNotExists()) {\\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\\n                    + \" Make sure you\\'re using allure version not less then 2.x.\");\\n        }\\n    }\\n\\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\\n        final DefaultExecutor executor = new DefaultExecutor();\\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\\n        executor.setWatchdog(watchdog);\\n        executor.setExitValue(0);\\n        return executor.execute(commandLine);\\n    }\\n\\n    private Path getAllureExecutablePath() {\\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\\n    }\\n\\n    private Path getAllureHome() {\\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\\n    }\\n\\n    public boolean allureExists() {\\n        final Path allureExecutablePath = getAllureExecutablePath();\\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\\n    }\\n\\n    public boolean allureNotExists() {\\n        return !allureExists();\\n    }\\n\\n    public void downloadWithMaven(final MavenSession session,\\n            final DependencyResolver dependencyResolver) throws IOException {\\n        final ProjectBuildingRequest buildingRequest =\\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\\n        buildingRequest.setResolveDependencies(false);\\n\\n        final Dependency cliDep = new Dependency();\\n        cliDep.setGroupId(\"io.qameta.allure\");\\n        cliDep.setArtifactId(\"allure-commandline\");\\n        cliDep.setVersion(version);\\n        cliDep.setType(\"zip\");\\n\\n        try {\\n            final Iterator<ArtifactResult> resolved =\\n                    dependencyResolver.resolveDependencies(buildingRequest,\\n                            Collections.singletonList(cliDep), null, null).iterator();\\n\\n            if (resolved.hasNext()) {\\n                unpack(resolved.next().getArtifact().getFile());\\n            } else {\\n                throw new IOException(\"No allure commandline artifact found.\");\\n\\n            }\\n        } catch (DependencyResolverException e) {\\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\\n        }\\n    }\\n\\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\\n            throws IOException {\\n        if (allureExists()) {\\n            return;\\n        }\\n\\n        final Path allureZip = Files.createTempFile(\"allure\", version);\\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\\n        final URL url = new URL(allureUrl);\\n\\n        if (mavenProxy != null && version != null) {\\n            final InetSocketAddress proxyAddress =\\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\\n\\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\\n                final String proxyUser = mavenProxy.getUsername();\\n                final String proxyPassword = mavenProxy.getPassword();\\n\\n                Authenticator.setDefault(new Authenticator() {\\n                    @Override\\n                    public PasswordAuthentication getPasswordAuthentication() {\\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\\n                    }\\n                });\\n            }\\n\\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\\n        } else {\\n            FileUtils.copyURLToFile(url, allureZip.toFile());\\n        }\\n\\n        unpack(allureZip.toFile());\\n    }\\n\\n    private void unpack(final File file) throws IOException {\\n        try {\\n            final ZipFile zipFile = new ZipFile(file);\\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\\n        } catch (ZipException e) {\\n            throw new IOException(e);\\n        }\\n\\n        final Path allureExecutable = getAllureExecutablePath();\\n        if (Files.exists(allureExecutable)) {\\n            allureExecutable.toFile().setExecutable(true);\\n        }\\n    }\\n\\n    public Path getInstallationDirectory() {\\n        return installationDirectory;\\n    }\\n\\n    public String getVersion() {\\n        return version;\\n    }\\n\\n    private boolean isWindows() {\\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\\n    }\\n}\\nimport net.lingala.zip4j.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\nimport net.lingala.zip4j.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\n'}",
            "error": "",
            "span_id": 3414190819391882253
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": "{'src/main/java/io/qameta/allure/maven/AllureCommandline.java': '/*\\n *  Copyright 2021 Qameta Software O\u00dc\\n *\\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\\n *  you may not use this file except in compliance with the License.\\n *  You may obtain a copy of the License at\\n *\\n *      http://www.apache.org/licenses/LICENSE-2.0\\n *\\n *  Unless required by applicable law or agreed to in writing, software\\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n *  See the License for the specific language governing permissions and\\n *  limitations under the License.\\n */\\npackage io.qameta.allure.maven;\\n\\nimport net.lingala.zip4j.core.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\nimport org.apache.commons.exec.CommandLine;\\nimport org.apache.commons.exec.DefaultExecutor;\\nimport org.apache.commons.exec.ExecuteWatchdog;\\nimport org.apache.commons.io.FileUtils;\\nimport org.apache.maven.execution.MavenSession;\\nimport org.apache.maven.model.Dependency;\\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\\nimport org.apache.maven.project.ProjectBuildingRequest;\\nimport org.apache.maven.settings.Proxy;\\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\\n\\nimport java.io.File;\\nimport java.io.FileNotFoundException;\\nimport java.io.IOException;\\nimport java.io.InputStream;\\nimport java.net.Authenticator;\\nimport java.net.InetSocketAddress;\\nimport java.net.PasswordAuthentication;\\nimport java.net.URL;\\nimport java.nio.file.Files;\\nimport java.nio.file.Path;\\nimport java.nio.file.StandardCopyOption;\\nimport java.util.Collections;\\nimport java.util.Iterator;\\nimport java.util.List;\\nimport java.util.Objects;\\nimport java.util.concurrent.TimeUnit;\\n\\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\\n        \"MultipleStringLiterals\"})\\npublic class AllureCommandline {\\n\\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\\n\\n    private static final int DEFAULT_TIMEOUT = 3600;\\n\\n    private final String version;\\n\\n    private final int timeout;\\n\\n    private final Path installationDirectory;\\n\\n    public AllureCommandline(final Path installationDirectory, final String version) {\\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\\n    }\\n\\n    public AllureCommandline(final Path installationDirectory, final String version,\\n            final int timeout) {\\n        this.installationDirectory = installationDirectory;\\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\\n        this.timeout = timeout;\\n    }\\n\\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\\n            throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"generate\");\\n        commandLine.addArgument(\"--clean\");\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        commandLine.addArgument(\"-o\");\\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\\n\\n        return execute(commandLine, timeout);\\n    }\\n\\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\\n            final Integer servePort) throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"serve\");\\n        if (serveHost != null && serveHost.matches(\"(\\\\\\\\d{1,3}\\\\\\\\.){3}\\\\\\\\d{1,3}\")) {\\n            commandLine.addArgument(\"--host\");\\n            commandLine.addArgument(serveHost);\\n        }\\n        if (servePort > 0) {\\n            commandLine.addArgument(\"--port\");\\n            commandLine.addArgument(Objects.toString(servePort));\\n        }\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        return execute(commandLine, timeout);\\n    }\\n\\n    private void checkAllureExists() throws FileNotFoundException {\\n        if (allureNotExists()) {\\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\\n                    + \" Make sure you\\'re using allure version not less then 2.x.\");\\n        }\\n    }\\n\\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\\n        final DefaultExecutor executor = new DefaultExecutor();\\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\\n        executor.setWatchdog(watchdog);\\n        executor.setExitValue(0);\\n        return executor.execute(commandLine);\\n    }\\n\\n    private Path getAllureExecutablePath() {\\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\\n    }\\n\\n    private Path getAllureHome() {\\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\\n    }\\n\\n    public boolean allureExists() {\\n        final Path allureExecutablePath = getAllureExecutablePath();\\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\\n    }\\n\\n    public boolean allureNotExists() {\\n        return !allureExists();\\n    }\\n\\n    public void downloadWithMaven(final MavenSession session,\\n            final DependencyResolver dependencyResolver) throws IOException {\\n        final ProjectBuildingRequest buildingRequest =\\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\\n        buildingRequest.setResolveDependencies(false);\\n\\n        final Dependency cliDep = new Dependency();\\n        cliDep.setGroupId(\"io.qameta.allure\");\\n        cliDep.setArtifactId(\"allure-commandline\");\\n        cliDep.setVersion(version);\\n        cliDep.setType(\"zip\");\\n\\n        try {\\n            final Iterator<ArtifactResult> resolved =\\n                    dependencyResolver.resolveDependencies(buildingRequest,\\n                            Collections.singletonList(cliDep), null, null).iterator();\\n\\n            if (resolved.hasNext()) {\\n                unpack(resolved.next().getArtifact().getFile());\\n            } else {\\n                throw new IOException(\"No allure commandline artifact found.\");\\n\\n            }\\n        } catch (DependencyResolverException e) {\\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\\n        }\\n    }\\n\\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\\n            throws IOException {\\n        if (allureExists()) {\\n            return;\\n        }\\n\\n        final Path allureZip = Files.createTempFile(\"allure\", version);\\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\\n        final URL url = new URL(allureUrl);\\n\\n        if (mavenProxy != null && version != null) {\\n            final InetSocketAddress proxyAddress =\\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\\n\\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\\n                final String proxyUser = mavenProxy.getUsername();\\n                final String proxyPassword = mavenProxy.getPassword();\\n\\n                Authenticator.setDefault(new Authenticator() {\\n                    @Override\\n                    public PasswordAuthentication getPasswordAuthentication() {\\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\\n                    }\\n                });\\n            }\\n\\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\\n        } else {\\n            FileUtils.copyURLToFile(url, allureZip.toFile());\\n        }\\n\\n        unpack(allureZip.toFile());\\n    }\\n\\n    private void unpack(final File file) throws IOException {\\n        try {\\n            final ZipFile zipFile = new ZipFile(file);\\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\\n        } catch (ZipException e) {\\n            throw new IOException(e);\\n        }\\n\\n        final Path allureExecutable = getAllureExecutablePath();\\n        if (Files.exists(allureExecutable)) {\\n            allureExecutable.toFile().setExecutable(true);\\n        }\\n    }\\n\\n    public Path getInstallationDirectory() {\\n        return installationDirectory;\\n    }\\n\\n    public String getVersion() {\\n        return version;\\n    }\\n\\n    private boolean isWindows() {\\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\\n    }\\n}\\nimport net.lingala.zip4j.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\n'}",
            "error": "",
            "span_id": 16533284937062822477
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": "{'src/main/java/io/qameta/allure/maven/AllureCommandline.java': '/*\\n *  Copyright 2021 Qameta Software O\u00dc\\n *\\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\\n *  you may not use this file except in compliance with the License.\\n *  You may obtain a copy of the License at\\n *\\n *      http://www.apache.org/licenses/LICENSE-2.0\\n *\\n *  Unless required by applicable law or agreed to in writing, software\\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n *  See the License for the specific language governing permissions and\\n *  limitations under the License.\\n */\\npackage io.qameta.allure.maven;\\n\\nimport net.lingala.zip4j.core.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\nimport org.apache.commons.exec.CommandLine;\\nimport org.apache.commons.exec.DefaultExecutor;\\nimport org.apache.commons.exec.ExecuteWatchdog;\\nimport org.apache.commons.io.FileUtils;\\nimport org.apache.maven.execution.MavenSession;\\nimport org.apache.maven.model.Dependency;\\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\\nimport org.apache.maven.project.ProjectBuildingRequest;\\nimport org.apache.maven.settings.Proxy;\\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\\n\\nimport java.io.File;\\nimport java.io.FileNotFoundException;\\nimport java.io.IOException;\\nimport java.io.InputStream;\\nimport java.net.Authenticator;\\nimport java.net.InetSocketAddress;\\nimport java.net.PasswordAuthentication;\\nimport java.net.URL;\\nimport java.nio.file.Files;\\nimport java.nio.file.Path;\\nimport java.nio.file.StandardCopyOption;\\nimport java.util.Collections;\\nimport java.util.Iterator;\\nimport java.util.List;\\nimport java.util.Objects;\\nimport java.util.concurrent.TimeUnit;\\n\\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\\n        \"MultipleStringLiterals\"})\\npublic class AllureCommandline {\\n\\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\\n\\n    private static final int DEFAULT_TIMEOUT = 3600;\\n\\n    private final String version;\\n\\n    private final int timeout;\\n\\n    private final Path installationDirectory;\\n\\n    public AllureCommandline(final Path installationDirectory, final String version) {\\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\\n    }\\n\\n    public AllureCommandline(final Path installationDirectory, final String version,\\n            final int timeout) {\\n        this.installationDirectory = installationDirectory;\\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\\n        this.timeout = timeout;\\n    }\\n\\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\\n            throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"generate\");\\n        commandLine.addArgument(\"--clean\");\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        commandLine.addArgument(\"-o\");\\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\\n\\n        return execute(commandLine, timeout);\\n    }\\n\\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\\n            final Integer servePort) throws IOException {\\n\\n        this.checkAllureExists();\\n\\n        FileUtils.deleteQuietly(reportPath.toFile());\\n\\n        final CommandLine commandLine =\\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\\n        commandLine.addArgument(\"serve\");\\n        if (serveHost != null && serveHost.matches(\"(\\\\\\\\d{1,3}\\\\\\\\.){3}\\\\\\\\d{1,3}\")) {\\n            commandLine.addArgument(\"--host\");\\n            commandLine.addArgument(serveHost);\\n        }\\n        if (servePort > 0) {\\n            commandLine.addArgument(\"--port\");\\n            commandLine.addArgument(Objects.toString(servePort));\\n        }\\n        for (Path resultsPath : resultsPaths) {\\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\\n        }\\n        return execute(commandLine, timeout);\\n    }\\n\\n    private void checkAllureExists() throws FileNotFoundException {\\n        if (allureNotExists()) {\\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\\n                    + \" Make sure you\\'re using allure version not less then 2.x.\");\\n        }\\n    }\\n\\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\\n        final DefaultExecutor executor = new DefaultExecutor();\\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\\n        executor.setWatchdog(watchdog);\\n        executor.setExitValue(0);\\n        return executor.execute(commandLine);\\n    }\\n\\n    private Path getAllureExecutablePath() {\\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\\n    }\\n\\n    private Path getAllureHome() {\\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\\n    }\\n\\n    public boolean allureExists() {\\n        final Path allureExecutablePath = getAllureExecutablePath();\\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\\n    }\\n\\n    public boolean allureNotExists() {\\n        return !allureExists();\\n    }\\n\\n    public void downloadWithMaven(final MavenSession session,\\n            final DependencyResolver dependencyResolver) throws IOException {\\n        final ProjectBuildingRequest buildingRequest =\\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\\n        buildingRequest.setResolveDependencies(false);\\n\\n        final Dependency cliDep = new Dependency();\\n        cliDep.setGroupId(\"io.qameta.allure\");\\n        cliDep.setArtifactId(\"allure-commandline\");\\n        cliDep.setVersion(version);\\n        cliDep.setType(\"zip\");\\n\\n        try {\\n            final Iterator<ArtifactResult> resolved =\\n                    dependencyResolver.resolveDependencies(buildingRequest,\\n                            Collections.singletonList(cliDep), null, null).iterator();\\n\\n            if (resolved.hasNext()) {\\n                unpack(resolved.next().getArtifact().getFile());\\n            } else {\\n                throw new IOException(\"No allure commandline artifact found.\");\\n\\n            }\\n        } catch (DependencyResolverException e) {\\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\\n        }\\n    }\\n\\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\\n            throws IOException {\\n        if (allureExists()) {\\n            return;\\n        }\\n\\n        final Path allureZip = Files.createTempFile(\"allure\", version);\\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\\n        final URL url = new URL(allureUrl);\\n\\n        if (mavenProxy != null && version != null) {\\n            final InetSocketAddress proxyAddress =\\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\\n\\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\\n                final String proxyUser = mavenProxy.getUsername();\\n                final String proxyPassword = mavenProxy.getPassword();\\n\\n                Authenticator.setDefault(new Authenticator() {\\n                    @Override\\n                    public PasswordAuthentication getPasswordAuthentication() {\\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\\n                    }\\n                });\\n            }\\n\\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\\n        } else {\\n            FileUtils.copyURLToFile(url, allureZip.toFile());\\n        }\\n\\n        unpack(allureZip.toFile());\\n    }\\n\\n    private void unpack(final File file) throws IOException {\\n        try {\\n            final ZipFile zipFile = new ZipFile(file);\\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\\n        } catch (ZipException e) {\\n            throw new IOException(e);\\n        }\\n\\n        final Path allureExecutable = getAllureExecutablePath();\\n        if (Files.exists(allureExecutable)) {\\n            allureExecutable.toFile().setExecutable(true);\\n        }\\n    }\\n\\n    public Path getInstallationDirectory() {\\n        return installationDirectory;\\n    }\\n\\n    public String getVersion() {\\n        return version;\\n    }\\n\\n    private boolean isWindows() {\\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\\n    }\\n}\\nimport net.lingala.zip4j.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\nimport net.lingala.zip4j.ZipFile;\\nimport net.lingala.zip4j.exception.ZipException;\\n'}",
            "error": "",
            "span_id": 4931647156900925643
        }
    ],
    "compile_maven": [
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": {
                "compilation_has_succeeded": true,
                "test_has_succeeded": false,
                "error_text": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.436 s\n[INFO] Finished at: 2024-08-09T02:18:56Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
                "updated_files": {
                    "src/main/java/io/qameta/allure/maven/AllureCommandline.java": "/*\n *  Copyright 2021 Qameta Software O\u00dc\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\npackage io.qameta.allure.maven;\n\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\nimport org.apache.commons.exec.ExecuteWatchdog;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.maven.execution.MavenSession;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\nimport org.apache.maven.project.ProjectBuildingRequest;\nimport org.apache.maven.settings.Proxy;\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.Authenticator;\nimport java.net.InetSocketAddress;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Collections;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\n        \"MultipleStringLiterals\"})\npublic class AllureCommandline {\n\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\n\n    private static final int DEFAULT_TIMEOUT = 3600;\n\n    private final String version;\n\n    private final int timeout;\n\n    private final Path installationDirectory;\n\n    public AllureCommandline(final Path installationDirectory, final String version) {\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\n    }\n\n    public AllureCommandline(final Path installationDirectory, final String version,\n            final int timeout) {\n        this.installationDirectory = installationDirectory;\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\n        this.timeout = timeout;\n    }\n\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\n            throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"generate\");\n        commandLine.addArgument(\"--clean\");\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        commandLine.addArgument(\"-o\");\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\n\n        return execute(commandLine, timeout);\n    }\n\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\n            final Integer servePort) throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"serve\");\n        if (serveHost != null && serveHost.matches(\"(\\\\d{1,3}\\\\.){3}\\\\d{1,3}\")) {\n            commandLine.addArgument(\"--host\");\n            commandLine.addArgument(serveHost);\n        }\n        if (servePort > 0) {\n            commandLine.addArgument(\"--port\");\n            commandLine.addArgument(Objects.toString(servePort));\n        }\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        return execute(commandLine, timeout);\n    }\n\n    private void checkAllureExists() throws FileNotFoundException {\n        if (allureNotExists()) {\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\n                    + \" Make sure you're using allure version not less then 2.x.\");\n        }\n    }\n\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\n        final DefaultExecutor executor = new DefaultExecutor();\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\n        executor.setWatchdog(watchdog);\n        executor.setExitValue(0);\n        return executor.execute(commandLine);\n    }\n\n    private Path getAllureExecutablePath() {\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\n    }\n\n    private Path getAllureHome() {\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\n    }\n\n    public boolean allureExists() {\n        final Path allureExecutablePath = getAllureExecutablePath();\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\n    }\n\n    public boolean allureNotExists() {\n        return !allureExists();\n    }\n\n    public void downloadWithMaven(final MavenSession session,\n            final DependencyResolver dependencyResolver) throws IOException {\n        final ProjectBuildingRequest buildingRequest =\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n        buildingRequest.setResolveDependencies(false);\n\n        final Dependency cliDep = new Dependency();\n        cliDep.setGroupId(\"io.qameta.allure\");\n        cliDep.setArtifactId(\"allure-commandline\");\n        cliDep.setVersion(version);\n        cliDep.setType(\"zip\");\n\n        try {\n            final Iterator<ArtifactResult> resolved =\n                    dependencyResolver.resolveDependencies(buildingRequest,\n                            Collections.singletonList(cliDep), null, null).iterator();\n\n            if (resolved.hasNext()) {\n                unpack(resolved.next().getArtifact().getFile());\n            } else {\n                throw new IOException(\"No allure commandline artifact found.\");\n\n            }\n        } catch (DependencyResolverException e) {\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\n        }\n    }\n\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\n            throws IOException {\n        if (allureExists()) {\n            return;\n        }\n\n        final Path allureZip = Files.createTempFile(\"allure\", version);\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\n        final URL url = new URL(allureUrl);\n\n        if (mavenProxy != null && version != null) {\n            final InetSocketAddress proxyAddress =\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\n\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\n                final String proxyUser = mavenProxy.getUsername();\n                final String proxyPassword = mavenProxy.getPassword();\n\n                Authenticator.setDefault(new Authenticator() {\n                    @Override\n                    public PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\n                    }\n                });\n            }\n\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\n        } else {\n            FileUtils.copyURLToFile(url, allureZip.toFile());\n        }\n\n        unpack(allureZip.toFile());\n    }\n\n    private void unpack(final File file) throws IOException {\n        try {\n            final ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\n        } catch (ZipException e) {\n            throw new IOException(e);\n        }\n\n        final Path allureExecutable = getAllureExecutablePath();\n        if (Files.exists(allureExecutable)) {\n            allureExecutable.toFile().setExecutable(true);\n        }\n    }\n\n    public Path getInstallationDirectory() {\n        return installationDirectory;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    private boolean isWindows() {\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n    }\n}\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n"
                },
                "compile_error_details": {}
            },
            "error": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.436 s\n[INFO] Finished at: 2024-08-09T02:18:56Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
            "span_id": 9202177958983494414
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": {
                "compilation_has_succeeded": true,
                "test_has_succeeded": false,
                "error_text": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.994 s\n[INFO] Finished at: 2024-08-09T02:19:17Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
                "updated_files": {
                    "src/main/java/io/qameta/allure/maven/AllureCommandline.java": "/*\n *  Copyright 2021 Qameta Software O\u00dc\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\npackage io.qameta.allure.maven;\n\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\nimport org.apache.commons.exec.ExecuteWatchdog;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.maven.execution.MavenSession;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\nimport org.apache.maven.project.ProjectBuildingRequest;\nimport org.apache.maven.settings.Proxy;\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.Authenticator;\nimport java.net.InetSocketAddress;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Collections;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\n        \"MultipleStringLiterals\"})\npublic class AllureCommandline {\n\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\n\n    private static final int DEFAULT_TIMEOUT = 3600;\n\n    private final String version;\n\n    private final int timeout;\n\n    private final Path installationDirectory;\n\n    public AllureCommandline(final Path installationDirectory, final String version) {\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\n    }\n\n    public AllureCommandline(final Path installationDirectory, final String version,\n            final int timeout) {\n        this.installationDirectory = installationDirectory;\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\n        this.timeout = timeout;\n    }\n\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\n            throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"generate\");\n        commandLine.addArgument(\"--clean\");\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        commandLine.addArgument(\"-o\");\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\n\n        return execute(commandLine, timeout);\n    }\n\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\n            final Integer servePort) throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"serve\");\n        if (serveHost != null && serveHost.matches(\"(\\\\d{1,3}\\\\.){3}\\\\d{1,3}\")) {\n            commandLine.addArgument(\"--host\");\n            commandLine.addArgument(serveHost);\n        }\n        if (servePort > 0) {\n            commandLine.addArgument(\"--port\");\n            commandLine.addArgument(Objects.toString(servePort));\n        }\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        return execute(commandLine, timeout);\n    }\n\n    private void checkAllureExists() throws FileNotFoundException {\n        if (allureNotExists()) {\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\n                    + \" Make sure you're using allure version not less then 2.x.\");\n        }\n    }\n\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\n        final DefaultExecutor executor = new DefaultExecutor();\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\n        executor.setWatchdog(watchdog);\n        executor.setExitValue(0);\n        return executor.execute(commandLine);\n    }\n\n    private Path getAllureExecutablePath() {\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\n    }\n\n    private Path getAllureHome() {\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\n    }\n\n    public boolean allureExists() {\n        final Path allureExecutablePath = getAllureExecutablePath();\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\n    }\n\n    public boolean allureNotExists() {\n        return !allureExists();\n    }\n\n    public void downloadWithMaven(final MavenSession session,\n            final DependencyResolver dependencyResolver) throws IOException {\n        final ProjectBuildingRequest buildingRequest =\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n        buildingRequest.setResolveDependencies(false);\n\n        final Dependency cliDep = new Dependency();\n        cliDep.setGroupId(\"io.qameta.allure\");\n        cliDep.setArtifactId(\"allure-commandline\");\n        cliDep.setVersion(version);\n        cliDep.setType(\"zip\");\n\n        try {\n            final Iterator<ArtifactResult> resolved =\n                    dependencyResolver.resolveDependencies(buildingRequest,\n                            Collections.singletonList(cliDep), null, null).iterator();\n\n            if (resolved.hasNext()) {\n                unpack(resolved.next().getArtifact().getFile());\n            } else {\n                throw new IOException(\"No allure commandline artifact found.\");\n\n            }\n        } catch (DependencyResolverException e) {\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\n        }\n    }\n\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\n            throws IOException {\n        if (allureExists()) {\n            return;\n        }\n\n        final Path allureZip = Files.createTempFile(\"allure\", version);\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\n        final URL url = new URL(allureUrl);\n\n        if (mavenProxy != null && version != null) {\n            final InetSocketAddress proxyAddress =\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\n\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\n                final String proxyUser = mavenProxy.getUsername();\n                final String proxyPassword = mavenProxy.getPassword();\n\n                Authenticator.setDefault(new Authenticator() {\n                    @Override\n                    public PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\n                    }\n                });\n            }\n\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\n        } else {\n            FileUtils.copyURLToFile(url, allureZip.toFile());\n        }\n\n        unpack(allureZip.toFile());\n    }\n\n    private void unpack(final File file) throws IOException {\n        try {\n            final ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\n        } catch (ZipException e) {\n            throw new IOException(e);\n        }\n\n        final Path allureExecutable = getAllureExecutablePath();\n        if (Files.exists(allureExecutable)) {\n            allureExecutable.toFile().setExecutable(true);\n        }\n    }\n\n    public Path getInstallationDirectory() {\n        return installationDirectory;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    private boolean isWindows() {\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n    }\n}\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n"
                },
                "compile_error_details": {}
            },
            "error": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.994 s\n[INFO] Finished at: 2024-08-09T02:19:17Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
            "span_id": 14014481390943446154
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": {
                "compilation_has_succeeded": true,
                "test_has_succeeded": false,
                "error_text": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.272 s\n[INFO] Finished at: 2024-08-09T02:19:51Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
                "updated_files": {
                    "src/main/java/io/qameta/allure/maven/AllureCommandline.java": "/*\n *  Copyright 2021 Qameta Software O\u00dc\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\npackage io.qameta.allure.maven;\n\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\nimport org.apache.commons.exec.ExecuteWatchdog;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.maven.execution.MavenSession;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\nimport org.apache.maven.project.ProjectBuildingRequest;\nimport org.apache.maven.settings.Proxy;\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.Authenticator;\nimport java.net.InetSocketAddress;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Collections;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\n        \"MultipleStringLiterals\"})\npublic class AllureCommandline {\n\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\n\n    private static final int DEFAULT_TIMEOUT = 3600;\n\n    private final String version;\n\n    private final int timeout;\n\n    private final Path installationDirectory;\n\n    public AllureCommandline(final Path installationDirectory, final String version) {\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\n    }\n\n    public AllureCommandline(final Path installationDirectory, final String version,\n            final int timeout) {\n        this.installationDirectory = installationDirectory;\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\n        this.timeout = timeout;\n    }\n\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\n            throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"generate\");\n        commandLine.addArgument(\"--clean\");\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        commandLine.addArgument(\"-o\");\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\n\n        return execute(commandLine, timeout);\n    }\n\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\n            final Integer servePort) throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"serve\");\n        if (serveHost != null && serveHost.matches(\"(\\\\d{1,3}\\\\.){3}\\\\d{1,3}\")) {\n            commandLine.addArgument(\"--host\");\n            commandLine.addArgument(serveHost);\n        }\n        if (servePort > 0) {\n            commandLine.addArgument(\"--port\");\n            commandLine.addArgument(Objects.toString(servePort));\n        }\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        return execute(commandLine, timeout);\n    }\n\n    private void checkAllureExists() throws FileNotFoundException {\n        if (allureNotExists()) {\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\n                    + \" Make sure you're using allure version not less then 2.x.\");\n        }\n    }\n\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\n        final DefaultExecutor executor = new DefaultExecutor();\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\n        executor.setWatchdog(watchdog);\n        executor.setExitValue(0);\n        return executor.execute(commandLine);\n    }\n\n    private Path getAllureExecutablePath() {\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\n    }\n\n    private Path getAllureHome() {\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\n    }\n\n    public boolean allureExists() {\n        final Path allureExecutablePath = getAllureExecutablePath();\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\n    }\n\n    public boolean allureNotExists() {\n        return !allureExists();\n    }\n\n    public void downloadWithMaven(final MavenSession session,\n            final DependencyResolver dependencyResolver) throws IOException {\n        final ProjectBuildingRequest buildingRequest =\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n        buildingRequest.setResolveDependencies(false);\n\n        final Dependency cliDep = new Dependency();\n        cliDep.setGroupId(\"io.qameta.allure\");\n        cliDep.setArtifactId(\"allure-commandline\");\n        cliDep.setVersion(version);\n        cliDep.setType(\"zip\");\n\n        try {\n            final Iterator<ArtifactResult> resolved =\n                    dependencyResolver.resolveDependencies(buildingRequest,\n                            Collections.singletonList(cliDep), null, null).iterator();\n\n            if (resolved.hasNext()) {\n                unpack(resolved.next().getArtifact().getFile());\n            } else {\n                throw new IOException(\"No allure commandline artifact found.\");\n\n            }\n        } catch (DependencyResolverException e) {\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\n        }\n    }\n\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\n            throws IOException {\n        if (allureExists()) {\n            return;\n        }\n\n        final Path allureZip = Files.createTempFile(\"allure\", version);\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\n        final URL url = new URL(allureUrl);\n\n        if (mavenProxy != null && version != null) {\n            final InetSocketAddress proxyAddress =\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\n\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\n                final String proxyUser = mavenProxy.getUsername();\n                final String proxyPassword = mavenProxy.getPassword();\n\n                Authenticator.setDefault(new Authenticator() {\n                    @Override\n                    public PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\n                    }\n                });\n            }\n\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\n        } else {\n            FileUtils.copyURLToFile(url, allureZip.toFile());\n        }\n\n        unpack(allureZip.toFile());\n    }\n\n    private void unpack(final File file) throws IOException {\n        try {\n            final ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\n        } catch (ZipException e) {\n            throw new IOException(e);\n        }\n\n        final Path allureExecutable = getAllureExecutablePath();\n        if (Files.exists(allureExecutable)) {\n            allureExecutable.toFile().setExecutable(true);\n        }\n    }\n\n    public Path getInstallationDirectory() {\n        return installationDirectory;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    private boolean isWindows() {\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n    }\n}\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n"
                },
                "compile_error_details": {}
            },
            "error": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.272 s\n[INFO] Finished at: 2024-08-09T02:19:51Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
            "span_id": 6585964407928891973
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": {
                "compilation_has_succeeded": true,
                "test_has_succeeded": false,
                "error_text": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 11.406 s\n[INFO] Finished at: 2024-08-09T02:20:48Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
                "updated_files": {
                    "src/main/java/io/qameta/allure/maven/AllureCommandline.java": "/*\n *  Copyright 2021 Qameta Software O\u00dc\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\npackage io.qameta.allure.maven;\n\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\nimport org.apache.commons.exec.ExecuteWatchdog;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.maven.execution.MavenSession;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\nimport org.apache.maven.project.ProjectBuildingRequest;\nimport org.apache.maven.settings.Proxy;\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.Authenticator;\nimport java.net.InetSocketAddress;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Collections;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\n        \"MultipleStringLiterals\"})\npublic class AllureCommandline {\n\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\n\n    private static final int DEFAULT_TIMEOUT = 3600;\n\n    private final String version;\n\n    private final int timeout;\n\n    private final Path installationDirectory;\n\n    public AllureCommandline(final Path installationDirectory, final String version) {\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\n    }\n\n    public AllureCommandline(final Path installationDirectory, final String version,\n            final int timeout) {\n        this.installationDirectory = installationDirectory;\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\n        this.timeout = timeout;\n    }\n\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\n            throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"generate\");\n        commandLine.addArgument(\"--clean\");\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        commandLine.addArgument(\"-o\");\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\n\n        return execute(commandLine, timeout);\n    }\n\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\n            final Integer servePort) throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"serve\");\n        if (serveHost != null && serveHost.matches(\"(\\\\d{1,3}\\\\.){3}\\\\d{1,3}\")) {\n            commandLine.addArgument(\"--host\");\n            commandLine.addArgument(serveHost);\n        }\n        if (servePort > 0) {\n            commandLine.addArgument(\"--port\");\n            commandLine.addArgument(Objects.toString(servePort));\n        }\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        return execute(commandLine, timeout);\n    }\n\n    private void checkAllureExists() throws FileNotFoundException {\n        if (allureNotExists()) {\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\n                    + \" Make sure you're using allure version not less then 2.x.\");\n        }\n    }\n\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\n        final DefaultExecutor executor = new DefaultExecutor();\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\n        executor.setWatchdog(watchdog);\n        executor.setExitValue(0);\n        return executor.execute(commandLine);\n    }\n\n    private Path getAllureExecutablePath() {\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\n    }\n\n    private Path getAllureHome() {\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\n    }\n\n    public boolean allureExists() {\n        final Path allureExecutablePath = getAllureExecutablePath();\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\n    }\n\n    public boolean allureNotExists() {\n        return !allureExists();\n    }\n\n    public void downloadWithMaven(final MavenSession session,\n            final DependencyResolver dependencyResolver) throws IOException {\n        final ProjectBuildingRequest buildingRequest =\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n        buildingRequest.setResolveDependencies(false);\n\n        final Dependency cliDep = new Dependency();\n        cliDep.setGroupId(\"io.qameta.allure\");\n        cliDep.setArtifactId(\"allure-commandline\");\n        cliDep.setVersion(version);\n        cliDep.setType(\"zip\");\n\n        try {\n            final Iterator<ArtifactResult> resolved =\n                    dependencyResolver.resolveDependencies(buildingRequest,\n                            Collections.singletonList(cliDep), null, null).iterator();\n\n            if (resolved.hasNext()) {\n                unpack(resolved.next().getArtifact().getFile());\n            } else {\n                throw new IOException(\"No allure commandline artifact found.\");\n\n            }\n        } catch (DependencyResolverException e) {\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\n        }\n    }\n\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\n            throws IOException {\n        if (allureExists()) {\n            return;\n        }\n\n        final Path allureZip = Files.createTempFile(\"allure\", version);\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\n        final URL url = new URL(allureUrl);\n\n        if (mavenProxy != null && version != null) {\n            final InetSocketAddress proxyAddress =\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\n\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\n                final String proxyUser = mavenProxy.getUsername();\n                final String proxyPassword = mavenProxy.getPassword();\n\n                Authenticator.setDefault(new Authenticator() {\n                    @Override\n                    public PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\n                    }\n                });\n            }\n\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\n        } else {\n            FileUtils.copyURLToFile(url, allureZip.toFile());\n        }\n\n        unpack(allureZip.toFile());\n    }\n\n    private void unpack(final File file) throws IOException {\n        try {\n            final ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\n        } catch (ZipException e) {\n            throw new IOException(e);\n        }\n\n        final Path allureExecutable = getAllureExecutablePath();\n        if (Files.exists(allureExecutable)) {\n            allureExecutable.toFile().setExecutable(true);\n        }\n    }\n\n    public Path getInstallationDirectory() {\n        return installationDirectory;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    private boolean isWindows() {\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n    }\n}\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n"
                },
                "compile_error_details": {}
            },
            "error": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 11.406 s\n[INFO] Finished at: 2024-08-09T02:20:48Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
            "span_id": 12784217994106531159
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": {
                "compilation_has_succeeded": true,
                "test_has_succeeded": false,
                "error_text": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.826 s\n[INFO] Finished at: 2024-08-09T02:21:20Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
                "updated_files": {
                    "src/main/java/io/qameta/allure/maven/AllureCommandline.java": "/*\n *  Copyright 2021 Qameta Software O\u00dc\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\npackage io.qameta.allure.maven;\n\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\nimport org.apache.commons.exec.ExecuteWatchdog;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.maven.execution.MavenSession;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\nimport org.apache.maven.project.ProjectBuildingRequest;\nimport org.apache.maven.settings.Proxy;\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.Authenticator;\nimport java.net.InetSocketAddress;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Collections;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\n        \"MultipleStringLiterals\"})\npublic class AllureCommandline {\n\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\n\n    private static final int DEFAULT_TIMEOUT = 3600;\n\n    private final String version;\n\n    private final int timeout;\n\n    private final Path installationDirectory;\n\n    public AllureCommandline(final Path installationDirectory, final String version) {\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\n    }\n\n    public AllureCommandline(final Path installationDirectory, final String version,\n            final int timeout) {\n        this.installationDirectory = installationDirectory;\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\n        this.timeout = timeout;\n    }\n\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\n            throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"generate\");\n        commandLine.addArgument(\"--clean\");\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        commandLine.addArgument(\"-o\");\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\n\n        return execute(commandLine, timeout);\n    }\n\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\n            final Integer servePort) throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"serve\");\n        if (serveHost != null && serveHost.matches(\"(\\\\d{1,3}\\\\.){3}\\\\d{1,3}\")) {\n            commandLine.addArgument(\"--host\");\n            commandLine.addArgument(serveHost);\n        }\n        if (servePort > 0) {\n            commandLine.addArgument(\"--port\");\n            commandLine.addArgument(Objects.toString(servePort));\n        }\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        return execute(commandLine, timeout);\n    }\n\n    private void checkAllureExists() throws FileNotFoundException {\n        if (allureNotExists()) {\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\n                    + \" Make sure you're using allure version not less then 2.x.\");\n        }\n    }\n\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\n        final DefaultExecutor executor = new DefaultExecutor();\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\n        executor.setWatchdog(watchdog);\n        executor.setExitValue(0);\n        return executor.execute(commandLine);\n    }\n\n    private Path getAllureExecutablePath() {\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\n    }\n\n    private Path getAllureHome() {\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\n    }\n\n    public boolean allureExists() {\n        final Path allureExecutablePath = getAllureExecutablePath();\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\n    }\n\n    public boolean allureNotExists() {\n        return !allureExists();\n    }\n\n    public void downloadWithMaven(final MavenSession session,\n            final DependencyResolver dependencyResolver) throws IOException {\n        final ProjectBuildingRequest buildingRequest =\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n        buildingRequest.setResolveDependencies(false);\n\n        final Dependency cliDep = new Dependency();\n        cliDep.setGroupId(\"io.qameta.allure\");\n        cliDep.setArtifactId(\"allure-commandline\");\n        cliDep.setVersion(version);\n        cliDep.setType(\"zip\");\n\n        try {\n            final Iterator<ArtifactResult> resolved =\n                    dependencyResolver.resolveDependencies(buildingRequest,\n                            Collections.singletonList(cliDep), null, null).iterator();\n\n            if (resolved.hasNext()) {\n                unpack(resolved.next().getArtifact().getFile());\n            } else {\n                throw new IOException(\"No allure commandline artifact found.\");\n\n            }\n        } catch (DependencyResolverException e) {\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\n        }\n    }\n\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\n            throws IOException {\n        if (allureExists()) {\n            return;\n        }\n\n        final Path allureZip = Files.createTempFile(\"allure\", version);\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\n        final URL url = new URL(allureUrl);\n\n        if (mavenProxy != null && version != null) {\n            final InetSocketAddress proxyAddress =\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\n\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\n                final String proxyUser = mavenProxy.getUsername();\n                final String proxyPassword = mavenProxy.getPassword();\n\n                Authenticator.setDefault(new Authenticator() {\n                    @Override\n                    public PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\n                    }\n                });\n            }\n\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\n        } else {\n            FileUtils.copyURLToFile(url, allureZip.toFile());\n        }\n\n        unpack(allureZip.toFile());\n    }\n\n    private void unpack(final File file) throws IOException {\n        try {\n            final ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\n        } catch (ZipException e) {\n            throw new IOException(e);\n        }\n\n        final Path allureExecutable = getAllureExecutablePath();\n        if (Files.exists(allureExecutable)) {\n            allureExecutable.toFile().setExecutable(true);\n        }\n    }\n\n    public Path getInstallationDirectory() {\n        return installationDirectory;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    private boolean isWindows() {\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n    }\n}\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n"
                },
                "compile_error_details": {}
            },
            "error": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.826 s\n[INFO] Finished at: 2024-08-09T02:21:20Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
            "span_id": 16660274107970123462
        },
        {
            "input": "```diff\nsrc/main/java/io/qameta/allure/maven/AllureCommandline.java\n@@ -7,2 +7,2 @@\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n+import net.lingala.zip4j.ZipFile;\n+import net.lingala.zip4j.exception.ZipException;\n```",
            "output": {
                "compilation_has_succeeded": true,
                "test_has_succeeded": false,
                "error_text": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 11.172 s\n[INFO] Finished at: 2024-08-09T02:22:10Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
                "updated_files": {
                    "src/main/java/io/qameta/allure/maven/AllureCommandline.java": "/*\n *  Copyright 2021 Qameta Software O\u00dc\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\npackage io.qameta.allure.maven;\n\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\nimport org.apache.commons.exec.ExecuteWatchdog;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.maven.execution.MavenSession;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\nimport org.apache.maven.project.ProjectBuildingRequest;\nimport org.apache.maven.settings.Proxy;\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.Authenticator;\nimport java.net.InetSocketAddress;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Collections;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\n        \"MultipleStringLiterals\"})\npublic class AllureCommandline {\n\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\n\n    private static final int DEFAULT_TIMEOUT = 3600;\n\n    private final String version;\n\n    private final int timeout;\n\n    private final Path installationDirectory;\n\n    public AllureCommandline(final Path installationDirectory, final String version) {\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\n    }\n\n    public AllureCommandline(final Path installationDirectory, final String version,\n            final int timeout) {\n        this.installationDirectory = installationDirectory;\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\n        this.timeout = timeout;\n    }\n\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\n            throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"generate\");\n        commandLine.addArgument(\"--clean\");\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        commandLine.addArgument(\"-o\");\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\n\n        return execute(commandLine, timeout);\n    }\n\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\n            final Integer servePort) throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"serve\");\n        if (serveHost != null && serveHost.matches(\"(\\\\d{1,3}\\\\.){3}\\\\d{1,3}\")) {\n            commandLine.addArgument(\"--host\");\n            commandLine.addArgument(serveHost);\n        }\n        if (servePort > 0) {\n            commandLine.addArgument(\"--port\");\n            commandLine.addArgument(Objects.toString(servePort));\n        }\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        return execute(commandLine, timeout);\n    }\n\n    private void checkAllureExists() throws FileNotFoundException {\n        if (allureNotExists()) {\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\n                    + \" Make sure you're using allure version not less then 2.x.\");\n        }\n    }\n\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\n        final DefaultExecutor executor = new DefaultExecutor();\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\n        executor.setWatchdog(watchdog);\n        executor.setExitValue(0);\n        return executor.execute(commandLine);\n    }\n\n    private Path getAllureExecutablePath() {\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\n    }\n\n    private Path getAllureHome() {\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\n    }\n\n    public boolean allureExists() {\n        final Path allureExecutablePath = getAllureExecutablePath();\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\n    }\n\n    public boolean allureNotExists() {\n        return !allureExists();\n    }\n\n    public void downloadWithMaven(final MavenSession session,\n            final DependencyResolver dependencyResolver) throws IOException {\n        final ProjectBuildingRequest buildingRequest =\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n        buildingRequest.setResolveDependencies(false);\n\n        final Dependency cliDep = new Dependency();\n        cliDep.setGroupId(\"io.qameta.allure\");\n        cliDep.setArtifactId(\"allure-commandline\");\n        cliDep.setVersion(version);\n        cliDep.setType(\"zip\");\n\n        try {\n            final Iterator<ArtifactResult> resolved =\n                    dependencyResolver.resolveDependencies(buildingRequest,\n                            Collections.singletonList(cliDep), null, null).iterator();\n\n            if (resolved.hasNext()) {\n                unpack(resolved.next().getArtifact().getFile());\n            } else {\n                throw new IOException(\"No allure commandline artifact found.\");\n\n            }\n        } catch (DependencyResolverException e) {\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\n        }\n    }\n\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\n            throws IOException {\n        if (allureExists()) {\n            return;\n        }\n\n        final Path allureZip = Files.createTempFile(\"allure\", version);\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\n        final URL url = new URL(allureUrl);\n\n        if (mavenProxy != null && version != null) {\n            final InetSocketAddress proxyAddress =\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\n\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\n                final String proxyUser = mavenProxy.getUsername();\n                final String proxyPassword = mavenProxy.getPassword();\n\n                Authenticator.setDefault(new Authenticator() {\n                    @Override\n                    public PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\n                    }\n                });\n            }\n\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\n        } else {\n            FileUtils.copyURLToFile(url, allureZip.toFile());\n        }\n\n        unpack(allureZip.toFile());\n    }\n\n    private void unpack(final File file) throws IOException {\n        try {\n            final ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\n        } catch (ZipException e) {\n            throw new IOException(e);\n        }\n\n        final Path allureExecutable = getAllureExecutablePath();\n        if (Files.exists(allureExecutable)) {\n            allureExecutable.toFile().setExecutable(true);\n        }\n    }\n\n    public Path getInstallationDirectory() {\n        return installationDirectory;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    private boolean isWindows() {\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n    }\n}\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport net.lingala.zip4j.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\n"
                },
                "compile_error_details": {}
            },
            "error": "[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< io.qameta.allure:allure-maven >--------------------\n[INFO] Building Allure Maven 2.12-SNAPSHOT\n[INFO] from pom.xml\n[INFO] ----------------------------[ maven-plugin ]----------------------------\n[INFO]\n[INFO] --- clean:3.2.0:clean (default-clean) @ allure-maven ---\n[INFO] Deleting /mnt/repo/target\n[INFO]\n[INFO] --- checkstyle:3.1.2:check (validate) @ allure-maven ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 11.172 s\n[INFO] Finished at: 2024-08-09T02:22:10Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2:check (validate) on project allure-maven: Failed during checkstyle configuration: Exception was thrown while processing /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java: IllegalStateException occurred while parsing file /mnt/repo/src/main/java/io/qameta/allure/maven/AllureCommandline.java. 239:33: mismatched input '(' expecting ';': InputMismatchException -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException",
            "span_id": 11623844997996434141
        }
    ],
    "read_file": [
        {
            "input": "src/main/java/io/qameta/allure/maven/AllureCommandline.java",
            "output": "/*\n *  Copyright 2021 Qameta Software O\u00dc\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\npackage io.qameta.allure.maven;\n\nimport net.lingala.zip4j.core.ZipFile;\nimport net.lingala.zip4j.exception.ZipException;\nimport org.apache.commons.exec.CommandLine;\nimport org.apache.commons.exec.DefaultExecutor;\nimport org.apache.commons.exec.ExecuteWatchdog;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.maven.execution.MavenSession;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.project.DefaultProjectBuildingRequest;\nimport org.apache.maven.project.ProjectBuildingRequest;\nimport org.apache.maven.settings.Proxy;\nimport org.apache.maven.shared.transfer.artifact.resolve.ArtifactResult;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolver;\nimport org.apache.maven.shared.transfer.dependencies.resolve.DependencyResolverException;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.Authenticator;\nimport java.net.InetSocketAddress;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Collections;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings({\"ClassDataAbstractionCoupling\", \"ClassFanOutComplexity\",\n        \"MultipleStringLiterals\"})\npublic class AllureCommandline {\n\n    public static final String ALLURE_DEFAULT_VERSION = \"2.13.9\";\n\n    private static final int DEFAULT_TIMEOUT = 3600;\n\n    private final String version;\n\n    private final int timeout;\n\n    private final Path installationDirectory;\n\n    public AllureCommandline(final Path installationDirectory, final String version) {\n        this(installationDirectory, version, DEFAULT_TIMEOUT);\n    }\n\n    public AllureCommandline(final Path installationDirectory, final String version,\n            final int timeout) {\n        this.installationDirectory = installationDirectory;\n        this.version = version != null ? version : ALLURE_DEFAULT_VERSION;\n        this.timeout = timeout;\n    }\n\n    public int generateReport(final List<Path> resultsPaths, final Path reportPath)\n            throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"generate\");\n        commandLine.addArgument(\"--clean\");\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        commandLine.addArgument(\"-o\");\n        commandLine.addArgument(reportPath.toAbsolutePath().toString(), true);\n\n        return execute(commandLine, timeout);\n    }\n\n    public int serve(final List<Path> resultsPaths, final Path reportPath, final String serveHost,\n            final Integer servePort) throws IOException {\n\n        this.checkAllureExists();\n\n        FileUtils.deleteQuietly(reportPath.toFile());\n\n        final CommandLine commandLine =\n                new CommandLine(getAllureExecutablePath().toAbsolutePath().toFile());\n        commandLine.addArgument(\"serve\");\n        if (serveHost != null && serveHost.matches(\"(\\\\d{1,3}\\\\.){3}\\\\d{1,3}\")) {\n            commandLine.addArgument(\"--host\");\n            commandLine.addArgument(serveHost);\n        }\n        if (servePort > 0) {\n            commandLine.addArgument(\"--port\");\n            commandLine.addArgument(Objects.toString(servePort));\n        }\n        for (Path resultsPath : resultsPaths) {\n            commandLine.addArgument(resultsPath.toAbsolutePath().toString(), true);\n        }\n        return execute(commandLine, timeout);\n    }\n\n    private void checkAllureExists() throws FileNotFoundException {\n        if (allureNotExists()) {\n            throw new FileNotFoundException(\"There is no valid allure installation.\"\n                    + \" Make sure you're using allure version not less then 2.x.\");\n        }\n    }\n\n    private int execute(final CommandLine commandLine, final int timeout) throws IOException {\n        final DefaultExecutor executor = new DefaultExecutor();\n        final ExecuteWatchdog watchdog = new ExecuteWatchdog(TimeUnit.SECONDS.toMillis(timeout));\n        executor.setWatchdog(watchdog);\n        executor.setExitValue(0);\n        return executor.execute(commandLine);\n    }\n\n    private Path getAllureExecutablePath() {\n        final String allureExecutable = isWindows() ? \"allure.bat\" : \"allure\";\n        return getAllureHome().resolve(\"bin\").resolve(allureExecutable);\n    }\n\n    private Path getAllureHome() {\n        return installationDirectory.resolve(String.format(\"allure-%s\", version));\n    }\n\n    public boolean allureExists() {\n        final Path allureExecutablePath = getAllureExecutablePath();\n        return Files.exists(allureExecutablePath) && Files.isExecutable(allureExecutablePath);\n    }\n\n    public boolean allureNotExists() {\n        return !allureExists();\n    }\n\n    public void downloadWithMaven(final MavenSession session,\n            final DependencyResolver dependencyResolver) throws IOException {\n        final ProjectBuildingRequest buildingRequest =\n                new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n        buildingRequest.setResolveDependencies(false);\n\n        final Dependency cliDep = new Dependency();\n        cliDep.setGroupId(\"io.qameta.allure\");\n        cliDep.setArtifactId(\"allure-commandline\");\n        cliDep.setVersion(version);\n        cliDep.setType(\"zip\");\n\n        try {\n            final Iterator<ArtifactResult> resolved =\n                    dependencyResolver.resolveDependencies(buildingRequest,\n                            Collections.singletonList(cliDep), null, null).iterator();\n\n            if (resolved.hasNext()) {\n                unpack(resolved.next().getArtifact().getFile());\n            } else {\n                throw new IOException(\"No allure commandline artifact found.\");\n\n            }\n        } catch (DependencyResolverException e) {\n            throw new IOException(\"Cannot resolve allure commandline dependencies.\", e);\n        }\n    }\n\n    public void download(final String allureDownloadUrl, final Proxy mavenProxy)\n            throws IOException {\n        if (allureExists()) {\n            return;\n        }\n\n        final Path allureZip = Files.createTempFile(\"allure\", version);\n        final String allureUrl = String.format(allureDownloadUrl, version, version);\n        final URL url = new URL(allureUrl);\n\n        if (mavenProxy != null && version != null) {\n            final InetSocketAddress proxyAddress =\n                    new InetSocketAddress(mavenProxy.getHost(), mavenProxy.getPort());\n\n            if (mavenProxy.getUsername() != null && mavenProxy.getPassword() != null) {\n                final String proxyUser = mavenProxy.getUsername();\n                final String proxyPassword = mavenProxy.getPassword();\n\n                Authenticator.setDefault(new Authenticator() {\n                    @Override\n                    public PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(proxyUser, proxyPassword.toCharArray());\n                    }\n                });\n            }\n\n            final java.net.Proxy proxy = new java.net.Proxy(java.net.Proxy.Type.HTTP, proxyAddress);\n            final InputStream inputStream = url.openConnection(proxy).getInputStream();\n            Files.copy(inputStream, allureZip, StandardCopyOption.REPLACE_EXISTING);\n        } else {\n            FileUtils.copyURLToFile(url, allureZip.toFile());\n        }\n\n        unpack(allureZip.toFile());\n    }\n\n    private void unpack(final File file) throws IOException {\n        try {\n            final ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(getInstallationDirectory().toAbsolutePath().toString());\n        } catch (ZipException e) {\n            throw new IOException(e);\n        }\n\n        final Path allureExecutable = getAllureExecutablePath();\n        if (Files.exists(allureExecutable)) {\n            allureExecutable.toFile().setExecutable(true);\n        }\n    }\n\n    public Path getInstallationDirectory() {\n        return installationDirectory;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    private boolean isWindows() {\n        return System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n    }\n}\n",
            "error": "",
            "span_id": 2257193538317646310
        }
    ],
    "get_directory_tree": [
        {
            "input": "src/main/java/io/qameta/allure/maven",
            "output": "[\n    {\n        \"name\": \"AllureReportMojo.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"AlureAggregateMojo.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"ProxyUtils.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"AllureGenerateMojo.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"AllureServeMojo.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"DownloadUtils.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"AllureBaseMojo.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"AllureCommandline.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"AllureBulkMojo.java\",\n        \"type\": \"file\"\n    },\n    {\n        \"name\": \"AllureInstallMojo.java\",\n        \"type\": \"file\"\n    }\n]",
            "error": "",
            "span_id": 17584517857917789194
        }
    ],
    "get_language_server_suggestions": [],
    "reset_repo": [
        {
            "input": "",
            "output": "Successful reset of repository",
            "error": "",
            "span_id": 16029988223780388425
        },
        {
            "input": "",
            "output": "Successful reset of repository",
            "error": "",
            "span_id": 15171777087531080573
        }
    ]
}