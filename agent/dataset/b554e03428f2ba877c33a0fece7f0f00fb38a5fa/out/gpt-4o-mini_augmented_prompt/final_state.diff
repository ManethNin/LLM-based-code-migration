diff --git a/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml b/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml
index 8942ba2..75ba650 100644
--- a/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml
+++ b/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<licensePluginReport goal="CHECK" timestamp="1651191761918">
+<licensePluginReport goal="CHECK" timestamp="1722499248265">
     <module artifactId="license-maven-plugin" groupId="com.mycila" version="4.2-SNAPSHOT"/>
     <files>
         <file path="pom.xml" result="PRESENT"/>
diff --git a/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml b/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml
index ebec4e5..d2214c0 100644
--- a/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml
+++ b/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<licensePluginReport goal="CHECK" timestamp="1651191726202">
+<licensePluginReport goal="CHECK" timestamp="1722499242852">
     <module artifactId="license-maven-plugin-parent" groupId="com.mycila" version="4.2-SNAPSHOT"/>
     <files>
         <file path="pom.xml" result="PRESENT"/>
diff --git a/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java b/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java
index 8046747..c0a6efb 100755
--- a/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java
+++ b/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java
@@ -67,7 +67,8 @@ public class MavenProjectLicenses implements LicenseMap, LicenseMessage {
                               final ArtifactFilter filter, final Log log) {
     this.setProjects(projects);
     this.setBuildingRequest(buildingRequest);
-    this.setGraph(graph);
+-    this.setGraph(Optional.ofNullable(graph).orElse(new Maven31DependencyGraphBuilder()));
++    this.setGraph(Optional.ofNullable(graph).orElse(new Maven31DependencyGraphBuilder()));
     this.setFilter(filter);
     this.setProjectBuilder(projectBuilder);
     this.setLog(log);
@@ -83,6 +84,7 @@ public class MavenProjectLicenses implements LicenseMap, LicenseMessage {
   public MavenProjectLicenses(final MavenSession session, MavenProject project, final DependencyGraphBuilder graph,
                               final ProjectBuilder projectBuilder, final List<String> scopes, final Log log) {
     this(Collections.singleton(project), graph, projectBuilder, getBuildingRequestWithDefaults(session),
+    this(Collections.singleton(project), Optional.ofNullable(graph).orElse(new Maven31DependencyGraphBuilder()), projectBuilder, getBuildingRequestWithDefaults(session),
         new CumulativeScopeArtifactFilter(scopes), log);
   }
 
@@ -217,4 +219,4 @@ public class MavenProjectLicenses implements LicenseMap, LicenseMessage {
   protected void setBuildingRequest(final ProjectBuildingRequest buildingRequest) {
     this.buildingRequest = Optional.ofNullable(buildingRequest).orElse(new DefaultProjectBuildingRequest());
   }
-}
+}
\ No newline at end of file