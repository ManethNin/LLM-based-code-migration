diff --git a/docs/reports/4.2-SNAPSHOT/license-maven-plugin-git/license-plugin-report.xml b/docs/reports/4.2-SNAPSHOT/license-maven-plugin-git/license-plugin-report.xml
index 869d9a0..dd1df53 100644
--- a/docs/reports/4.2-SNAPSHOT/license-maven-plugin-git/license-plugin-report.xml
+++ b/docs/reports/4.2-SNAPSHOT/license-maven-plugin-git/license-plugin-report.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<licensePluginReport goal="CHECK" timestamp="1651191777267">
+<licensePluginReport goal="CHECK" timestamp="1723181094280">
     <module artifactId="license-maven-plugin-git" groupId="com.mycila" version="4.2-SNAPSHOT"/>
     <files>
         <file path="pom.xml" result="PRESENT"/>
diff --git a/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml b/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml
index 8942ba2..001e8e3 100644
--- a/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml
+++ b/docs/reports/4.2-SNAPSHOT/license-maven-plugin/license-plugin-report.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<licensePluginReport goal="CHECK" timestamp="1651191761918">
+<licensePluginReport goal="CHECK" timestamp="1723181072586">
     <module artifactId="license-maven-plugin" groupId="com.mycila" version="4.2-SNAPSHOT"/>
     <files>
         <file path="pom.xml" result="PRESENT"/>
diff --git a/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml b/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml
index ebec4e5..0a7ae4b 100644
--- a/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml
+++ b/docs/reports/4.2-SNAPSHOT/license-plugin-report.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<licensePluginReport goal="CHECK" timestamp="1651191726202">
+<licensePluginReport goal="CHECK" timestamp="1723181066720">
     <module artifactId="license-maven-plugin-parent" groupId="com.mycila" version="4.2-SNAPSHOT"/>
     <files>
         <file path="pom.xml" result="PRESENT"/>
diff --git a/license-maven-plugin/pom.xml b/license-maven-plugin/pom.xml
index db0deef..27498c6 100644
--- a/license-maven-plugin/pom.xml
+++ b/license-maven-plugin/pom.xml
@@ -244,3 +244,8 @@
   </dependencies>
 
 </project>
+    <dependency>
+      <groupId>org.apache.maven</groupId>
+      <artifactId>maven-plugin-api</artifactId>
+      <version>3.8.1</version>
+    </dependency>
diff --git a/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java b/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java
index 8046747..a5e167d 100755
--- a/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java
+++ b/license-maven-plugin/src/main/java/com/mycila/maven/plugin/license/dependencies/MavenProjectLicenses.java
@@ -30,7 +30,6 @@ import org.apache.maven.project.ProjectBuildingRequest;
 import org.apache.maven.shared.dependency.graph.DependencyGraphBuilder;
 import org.apache.maven.shared.dependency.graph.DependencyGraphBuilderException;
 import org.apache.maven.shared.dependency.graph.DependencyNode;
-import org.apache.maven.shared.dependency.graph.internal.Maven31DependencyGraphBuilder;
 
 import java.util.Collections;
 import java.util.HashSet;
@@ -183,7 +182,7 @@ public class MavenProjectLicenses implements LicenseMap, LicenseMessage {
   }
 
   private void setGraph(DependencyGraphBuilder graph) {
-    this.graph = Optional.ofNullable(graph).orElse(new Maven31DependencyGraphBuilder());
+this.graph = graph;
   }
 
   private ProjectBuilder getProjectBuilder() {
@@ -217,4 +216,4 @@ public class MavenProjectLicenses implements LicenseMap, LicenseMessage {
   protected void setBuildingRequest(final ProjectBuildingRequest buildingRequest) {
     this.buildingRequest = Optional.ofNullable(buildingRequest).orElse(new DefaultProjectBuildingRequest());
   }
-}
+}
\ No newline at end of file