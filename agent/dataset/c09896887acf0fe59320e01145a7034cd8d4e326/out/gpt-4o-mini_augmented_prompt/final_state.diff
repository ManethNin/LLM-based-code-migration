diff --git a/lib/src/main/java/io/jenkins/tools/incrementals/lib/UpdateChecker.java b/lib/src/main/java/io/jenkins/tools/incrementals/lib/UpdateChecker.java
index 94dd49b..020d4c9 100644
--- a/lib/src/main/java/io/jenkins/tools/incrementals/lib/UpdateChecker.java
+++ b/lib/src/main/java/io/jenkins/tools/incrementals/lib/UpdateChecker.java
@@ -236,7 +236,8 @@ public final class UpdateChecker {
      */
     private static boolean isAncestor(GitHubCommit ghc, String branch) throws Exception {
         try {
-            GHCompare.Status status = GitHub.connect().getRepository(ghc.owner + '/' + ghc.repo).getCompare(branch, ghc.hash).status;
+            GHCompare compare = GitHub.connect().getRepository(ghc.owner + '/' + ghc.repo).getCompare(branch, ghc.hash);
+            GHCompare.Status status = compare.getStatus();
             return status == GHCompare.Status.identical || status == GHCompare.Status.behind;
         } catch (FileNotFoundException x) {
             // For example, that branch does not exist in this repository.
@@ -278,3 +279,4 @@ public final class UpdateChecker {
     }
 
 }
+        try {