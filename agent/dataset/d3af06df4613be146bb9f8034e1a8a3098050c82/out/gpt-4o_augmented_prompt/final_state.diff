diff --git a/jadler-jetty/src/main/java/net/jadler/stubbing/server/jetty/JettyStubHttpServer.java b/jadler-jetty/src/main/java/net/jadler/stubbing/server/jetty/JettyStubHttpServer.java
index a501e45..8748afd 100644
--- a/jadler-jetty/src/main/java/net/jadler/stubbing/server/jetty/JettyStubHttpServer.java
+++ b/jadler-jetty/src/main/java/net/jadler/stubbing/server/jetty/JettyStubHttpServer.java
@@ -11,7 +11,7 @@ import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.apache.commons.lang.Validate;
 import org.eclipse.jetty.server.Connector;
-import org.eclipse.jetty.server.nio.SelectChannelConnector;
+import org.eclipse.jetty.server.ServerConnector;
 
 
 /**
@@ -30,11 +30,11 @@ public class JettyStubHttpServer implements StubHttpServer {
 
     public JettyStubHttpServer(final int port) {
         this.server = new Server();
-        this.server.setSendServerVersion(false);
-        this.server.setSendDateHeader(true);
+this.server.getServer().setAttribute("org.eclipse.jetty.server.Server.sendServerVersion", false);
+this.server.getServer().setAttribute("org.eclipse.jetty.server.Server.sendDateHeader", true);
         
-        this.httpConnector = new SelectChannelConnector();
-        this.httpConnector.setPort(port);
+ServerConnector httpConnector = new ServerConnector(this.server);
+httpConnector.setPort(port);
         server.addConnector(this.httpConnector);
     }
     
@@ -77,6 +77,6 @@ public class JettyStubHttpServer implements StubHttpServer {
      */
     @Override
     public int getPort() {
-        return httpConnector.getLocalPort();
+return ((ServerConnector) httpConnector).getLocalPort();
     }
 }
\ No newline at end of file